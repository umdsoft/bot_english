<% layout('layout') -%>
<h1 class="text-2xl font-semibold mb-5">O‘quvchilar</h1>

<div class="overflow-hidden rounded-xl border bg-white">
  <table class="min-w-full divide-y">
    <thead class="bg-gray-50 text-gray-600 text-sm">
      <tr>
        <th class="px-4 py-2 text-left">ID</th>
        <th class="px-4 py-2 text-left">tg_id</th>
        <th class="px-4 py-2 text-left">FIO</th>
        <th class="px-4 py-2 text-left">Username</th>
        <th class="px-4 py-2 text-left">Telefon</th>
        <th class="px-4 py-2 text-left">Student?</th>
        <th class="px-4 py-2"></th>
      </tr>
    </thead>
    <tbody class="divide-y">
      <% users.forEach(u => { %>
        <tr class="hover:bg-gray-50">
          <td class="px-4 py-2"><%= u.id %></td>
          <td class="px-4 py-2"><%= u.tg_id %></td>
          <td class="px-4 py-2"><%= u.full_name %></td>
          <td class="px-4 py-2"><%= u.username ? '@'+u.username : '' %></td>
          <td class="px-4 py-2"><%= u.phone %></td>
          <td class="px-4 py-2"><%= u.is_student ? '✅' : '—' %></td>
          <td class="px-4 py-2 text-right">
            <form class="inline" method="post" action="/admin/users/<%= u.id %>/toggle-student">
              <button class="rounded-lg bg-emerald-600 text-white px-3 py-1.5">
                <%= u.is_student ? 'Studentni olib tashla' : 'Student qil' %>
              </button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>
